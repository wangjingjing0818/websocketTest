
/**
 * 如何用node去建立一个websocket服务器
 * websocket=http
* */
let Server=require('ws').Server;
// 创建一个websocket 服务器，监听端口8080
let server=new Server({port:8080});
//服务器监听客户端的链接
server.on('connection',function(socket){
    //当客户端发过来消息之后会执行回调
    socket.on('message',function(msg){
        console.log(msg);
        //向客户端发送消息
        setInterval(function(){
            socket.send(new Date().toLocaleString()+msg)
        },1000)

    })

})